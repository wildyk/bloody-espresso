{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 17, "column": 0}, "map": {"version":3,"sources":["file:///root/CODING/tubes-siweb/src/app/verif/menu/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { alegreya, nosifer } from \"@/app/ui/fonts\";\r\nimport Link from \"next/link\";\r\nimport Image from \"next/image\";\r\nimport { ShoppingCart, UserRound } from \"lucide-react\";\r\nimport { useRouter } from \"next/navigation\";\r\n\r\ninterface MenuItem {\r\n  name: string;\r\n  description: string;\r\n  price: number;\r\n  image: string;\r\n  qty?: number;\r\n}\r\n\r\nexport default function Page() {\r\n  const [menuItems, setMenuItems] = useState<MenuItem[]>([]);\r\n  const [cart, setCart] = useState<MenuItem[]>([]);\r\n  const [isCartOpen, setIsCartOpen] = useState(false);\r\n  const [isPaying, setIsPaying] = useState(false);\r\n  const [profileOpen, setProfileOpen] = useState(false); \r\n  const router = useRouter();\r\n  const [dropdownOpen, setDropdownOpen] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      const res = await fetch(\"/api/menu\");\r\n      const data = await res.json();\r\n      console.log(\"Data dari API:\", data);\r\n      setMenuItems(data);\r\n    };\r\n\r\n    fetchData();\r\n  }, []);\r\n\r\n  const handleAddToCart = (item: MenuItem) => {\r\n    setCart((prevCart) => {\r\n      const existingItem = prevCart.find(\r\n        (cartItem) => cartItem.name === item.name\r\n      );\r\n      if (existingItem) {\r\n        return prevCart.map((cartItem) =>\r\n          cartItem.name === item.name\r\n            ? { ...cartItem, qty: (cartItem.qty || 1) + 1 }\r\n            : cartItem\r\n        );\r\n      } else {\r\n        return [...prevCart, { ...item, qty: 1 }];\r\n      }\r\n    });\r\n    setIsCartOpen(true);\r\n  };\r\n\r\n  const handleRemoveFromCart = (itemName: string) => {\r\n    setCart((prevCart) => prevCart.filter((item) => item.name !== itemName));\r\n  };\r\n\r\n  const handleQtyChange = (itemName: string, amount: number) => {\r\n    setCart((prevCart) =>\r\n      prevCart.map((item) =>\r\n        item.name === itemName\r\n          ? { ...item, qty: Math.max((item.qty || 1) + amount, 1) }\r\n          : item\r\n      )\r\n    );\r\n  };\r\n\r\n  const total = cart.reduce(\r\n    (acc, item) => acc + item.price * (item.qty || 1),\r\n    0\r\n  );\r\n\r\n  const submitTransaction = async () => {\r\n    try {\r\n      for (const item of cart) {\r\n        await fetch(\"/api/transaksi\", {\r\n          method: \"POST\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n          body: JSON.stringify({\r\n            product_name: item.name,\r\n            quantity: item.qty || 1,\r\n            total_price: item.price * (item.qty || 1),\r\n          }),\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Gagal kirim transaksi:\", error);\r\n    }\r\n  };\r\n\r\n  const handlePayment = async () => {\r\n    setIsPaying(true);\r\n    try {\r\n      await submitTransaction();\r\n      alert(\"Pembayaran berhasil! Terima kasih sudah memesan ☕\");\r\n      setCart([]);\r\n      setIsCartOpen(false);\r\n    } catch (err) {\r\n      alert(\"Gagal memproses pembayaran. Coba lagi ya.\");\r\n    } finally {\r\n      setIsPaying(false);\r\n    }\r\n  };\r\n\r\n  const toggleDropdown = () => {\r\n    setDropdownOpen((prev) => !prev);\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    localStorage.removeItem(\"token\"); \r\n    router.push(\"/auth/login\");\r\n  };\r\n  return (\r\n    <main className=\"min-h-screen bg-gradient-to-r from-red-950 to-black text-white relative\">\r\n      <section className=\"text-center py-4 px-10 mb-53\">\r\n        <h2\r\n          className={`${nosifer.className} text-7xl font-extrabold tracking-wide text-[#F8E4BE]`}\r\n        >\r\n          MENU\r\n        </h2>\r\n        <p className={`${alegreya.className} mt-4 text-2xl text-gray-300`}>\r\n          Jelajahi semua rasa kopi bersama kami. Selalu ada secangkir kopi baru\r\n          yang layak dicoba.\r\n        </p>\r\n\r\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-10 mt-10\">\r\n          {Array.isArray(menuItems) ? (\r\n            menuItems.map((item, index) => (\r\n              <div\r\n                key={index}\r\n                className=\"bg-[#FFF4E6] text-center rounded-lg overflow-hidden shadow-md transform transition-transform hover:scale-105 duration-300\"\r\n              >\r\n                <Image\r\n                  src={item.image}\r\n                  alt={item.name}\r\n                  width={400}\r\n                  height={250}\r\n                  className=\"w-full h-80 object-cover object-top\"\r\n                />\r\n                <div className={`${alegreya.className} p-6`}>\r\n                  <h3 className=\"text-[#603809] text-2xl font-extrabold\">\r\n                    {item.name}\r\n                  </h3>\r\n                  <p className=\"text-[#603809] text-xl mt-2\">\r\n                    {item.description}\r\n                  </p>\r\n                  <p className=\"text-[#603809] text-2xl font-bold mt-2\">\r\n                    Rp. {item.price.toLocaleString(\"id-ID\")}\r\n                  </p>\r\n                  <button\r\n                    className=\"mt-6 bg-[#A8715C] text-lg text-[#1E1E1E] px-14 py-4 rounded-full font-bold shadow-[0px_10px_30px_-5px_rgba(255,209,102,0.8)] hover:bg-yellow-800 transition cursor-pointer\"\r\n                    onClick={() => handleAddToCart(item)}\r\n                  >\r\n                    ORDER\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            ))\r\n          ) : (\r\n            <p className=\"col-span-4 text-center text-lg text-white\">\r\n              Loading menu...\r\n            </p>\r\n          )}\r\n        </div>\r\n      </section>\r\n\r\n      {isCartOpen && (\r\n        <div className=\"fixed top-0 right-0 w-full sm:w-[500px] h-full bg-[#5c0a0a] text-white z-50 p-6 overflow-y-auto\">\r\n          <div className=\"mb-6 border-b border-white pb-4 relative\">\r\n            <h2\r\n              className={`${nosifer.className} text-4xl font-bold text-center w-full text-[#f5deb3] drop-shadow-md my-4`}\r\n            >\r\n              KERANJANG\r\n            </h2>\r\n            <button\r\n              onClick={() => setIsCartOpen(false)}\r\n              className=\"absolute top-0 right-0 text-white text-2xl font-bold\"\r\n            >\r\n              ✕\r\n            </button>\r\n          </div>\r\n          {cart.map((item) => (\r\n            <div\r\n              key={item.name}\r\n              className={`${alegreya.className} mb-6 border-b border-white pb-4`}\r\n            >\r\n              <Image\r\n                src={item.image}\r\n                alt={item.name}\r\n                width={150}\r\n                height={150}\r\n                className=\"rounded\"\r\n              />\r\n              <h3 className=\"text-2xl font-bold mt-2\">{item.name}</h3>\r\n              <p className=\"text-xl\">\r\n                Rp. {item.price.toLocaleString(\"id-ID\")}\r\n              </p>\r\n              <div className=\"flex items-center gap-3 mt-2\">\r\n                <button\r\n                  onClick={() => handleQtyChange(item.name, -1)}\r\n                  className=\"px-3 py-1 bg-white text-black rounded\"\r\n                >\r\n                  -\r\n                </button>\r\n                <span className=\"text-xl\">{item.qty}</span>\r\n                <button\r\n                  onClick={() => handleQtyChange(item.name, 1)}\r\n                  className=\"px-3 py-1 bg-white text-black rounded\"\r\n                >\r\n                  +\r\n                </button>\r\n                <button\r\n                  onClick={() => handleRemoveFromCart(item.name)}\r\n                  className=\"ml-auto text-xl text-white uppercase\"\r\n                >\r\n                  Hapus\r\n                </button>\r\n              </div>\r\n            </div>\r\n          ))}\r\n\r\n          <div className=\"text-center mt-8\">\r\n            <div\r\n              className={`${alegreya.className} text-xl font-bold bg-[#A8715C] text-[#1E1E1E] py-2 mb-4 rounded`}\r\n            >\r\n              TOTAL ・ RP {total.toLocaleString(\"id-ID\")}\r\n            </div>\r\n            <button\r\n              onClick={handlePayment}\r\n              disabled={isPaying}\r\n              className={`${alegreya.className} w-full py-4 bg-[#A8715C] text-xl text-[#1E1E1E] font-bold rounded shadow-lg hover:bg-yellow-800 transition cursor-pointer`}\r\n            >\r\n              {isPaying ? \"Memproses Pembayaran...\" : \"BAYAR\"}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </main>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}